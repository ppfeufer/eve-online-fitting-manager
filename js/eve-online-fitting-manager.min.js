jQuery(document).ready(function($){"use strict";if(!Clipboard.isSupported()){$(".fitting-copy-to-clipboard").remove()}function closeCopyMessageElement(element){$(element).fadeTo(2e3,500).slideUp(500,function(){$(this).slideUp(500,function(){$(this).remove()})})}function showSuccess(message,element){$(element).html('<div class="alert alert-success alert-dismissable alert-copy-success">'+'<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+message+"</div>");closeCopyMessageElement(".alert-copy-success")}function showError(message,element){$(element).html('<div class="alert alert-danger alert-dismissable alert-copy-error">'+'<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+message+"</div>");closeCopyMessageElement(".alert-copy-error")}$(".btn-copy-eft-to-clipboard").on("click",function(){let clipboardEftData=new Clipboard(".btn-copy-eft-to-clipboard");clipboardEftData.on("success",function(e){showSuccess(fittingManagerL10n.copyToClipboard.eft.text.success,".fitting-copy-result");e.clearSelection();clipboardEftData.destroy()});clipboardEftData.on("error",function(){showError(fittingManagerL10n.copyToClipboard.eft.text.error,".fitting-copy-result");clipboardEftData.destroy()})});$(".btn-copy-permalink-to-clipboard").on("click",function(){let clipboardPermalinkData=new Clipboard(".btn-copy-permalink-to-clipboard");clipboardPermalinkData.on("success",function(e){showSuccess(fittingManagerL10n.copyToClipboard.permalink.text.success,".fitting-copy-result");e.clearSelection();clipboardPermalinkData.destroy()});clipboardPermalinkData.on("error",function(){showError(fittingManagerL10n.copyToClipboard.permalink.text.error,".fitting-copy-result");clipboardPermalinkData.destroy()})});if($(".fitting-market-price").length){let getEveFittingMarketData={ajaxCall:function(){$.ajax({type:"post",url:fittingManagerL10n.ajax.url,data:"action=get-eve-fitting-market-data&eftData="+eftData,dataType:"json",success:function(result){if(result!==null){$(".table-fitting-marketdata .eve-market-ship-buy").html(result.ship.jitaBuyPrice);$(".table-fitting-marketdata .eve-market-fitting-buy").html(result.fitting.jitaBuyPrice);$(".table-fitting-marketdata .eve-market-total-buy").html(result.total.jitaBuyPrice);$(".table-fitting-marketdata .eve-market-ship-sell").html(result.ship.jitaSellPrice);$(".table-fitting-marketdata .eve-market-fitting-sell").html(result.fitting.jitaSellPrice);$(".table-fitting-marketdata .eve-market-total-sell").html(result.total.jitaSellPrice)}},error:function(jqXHR,textStatus,errorThrow){console.log("Ajax request - "+textStatus+": "+errorThrow)}})}};let cSpeed=5;let cWidth=127;let cHeight=19;let cTotalFrames=20;let cFrameWidth=127;let cImageSrc=fittingManagerL10n.ajax.loaderImage;let cImageTimeout=false;let cIndex=0;let cXpos=0;let cPreloaderTimeout=false;let SECONDS_BETWEEN_FRAMES=0;let startAnimation=function(){let loaderImageElement=$(".table-fitting-marketdata .loaderImage");loaderImageElement.css("display","block");loaderImageElement.css("backgroundImage","url("+cImageSrc+")");loaderImageElement.css("width",cWidth+"px");loaderImageElement.css("height",cHeight+"px");let FPS=Math.round(100/cSpeed);SECONDS_BETWEEN_FRAMES=1/FPS;cPreloaderTimeout=setTimeout(continueAnimation,SECONDS_BETWEEN_FRAMES/1e3)};let continueAnimation=function(){cXpos+=cFrameWidth;cIndex+=1;if(cIndex>=cTotalFrames){cXpos=0;cIndex=0}let loaderImageElement=$(".table-fitting-marketdata .loaderImage");if(loaderImageElement){loaderImageElement.css("backgroundPosition",-cXpos+"px 0")}cPreloaderTimeout=setTimeout(continueAnimation,SECONDS_BETWEEN_FRAMES*1e3)};let stopAnimation=function(){clearTimeout(cPreloaderTimeout);cPreloaderTimeout=false};let imageLoader=function(s,fun){clearTimeout(cImageTimeout);cImageTimeout=0;let genImage=new Image;genImage.onload=function(){cImageTimeout=setTimeout(fun,0)};genImage.onerror=console.log("Could not load the image");genImage.src=s};imageLoader(cImageSrc,startAnimation);getEveFittingMarketData.ajaxCall()}});